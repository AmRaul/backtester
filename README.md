# üìà Backtester - –ú–æ–¥—É–ª—å –±—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –∞–ª–≥–æ—Ä–∏—Ç–º–∏—á–µ—Å–∫–∏—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π DCA (Dollar Cost Averaging), —Å—Ç—Ä–∞—Ç–µ–≥–∏–π –ú–∞—Ä—Ç–∏–Ω–≥–µ–π–ª –∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—Ä–¥–µ—Ä–æ–≤.

## üöÄ –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ Long/Short –ø–æ–∑–∏—Ü–∏–π** - —Ç–æ—Ä–≥–æ–≤–ª—è –≤ –æ–±–µ —Å—Ç–æ—Ä–æ–Ω—ã
- **DCA (Dollar Cost Averaging)** - —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–π –ø—Ä–∏ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏ —Ü–µ–Ω—ã
- **–°—Ç—Ä–∞—Ç–µ–≥–∏—è –ú–∞—Ä—Ç–∏–Ω–≥–µ–π–ª** - —É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ä–¥–µ—Ä–æ–≤ –ø—Ä–∏ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–∏
- **–ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞** - –≤—Å–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —á–µ—Ä–µ–∑ JSON –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç—å** - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞, –≥—Ä–∞—Ñ–∏–∫–∏, –∞–Ω–∞–ª–∏–∑ —Ä–∏—Å–∫–æ–≤
- **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö** - –∏–∑ CSV —Ñ–∞–π–ª–æ–≤ –∏ API —á–µ—Ä–µ–∑ CCXT (100+ –±–∏—Ä–∂)
- **–í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π UI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –±—ç–∫—Ç–µ—Å—Ç–∞–º–∏
- **Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è** - –ø—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
 
## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### üê≥ Docker (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
```bash
git clone <repository-url>
cd backtester
``` 


2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å:**
```bash
./docker-run.sh web
```

3. **–û—Ç–∫—Ä–æ–π—Ç–µ –±—Ä–∞—É–∑–µ—Ä:** http://localhost:8000

### üêç –õ–æ–∫–∞–ª—å–Ω–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
```bash
git clone <repository-url>
cd backtester
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

> **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –î–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö —Å –±–∏—Ä–∂ —Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–∞–∫–µ—Ç `ccxt`. –ï—Å–ª–∏ –æ–Ω –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–∏–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
> ```bash
> pip install ccxt
> ```

## üéØ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. **–°–æ–∑–¥–∞–π—Ç–µ –æ–±—Ä–∞–∑–µ—Ü –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:**
```bash
python main.py --create-sample-data
```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±–∞–∑–æ–≤—ã–π –±—ç–∫—Ç–µ—Å—Ç:**
```bash
python main.py
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –ø–æ–¥—Ä–æ–±–Ω—ã–º –≤—ã–≤–æ–¥–æ–º –∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:**
```bash
python main.py --verbose --save-results --generate-report
```

## üê≥ Docker –∑–∞–ø—É—Å–∫ (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
```bash
# –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –Ω–∞ http://localhost:8000
./docker-run.sh web

# –ò–ª–∏ —Å –ø–æ–º–æ—â—å—é docker-compose
docker-compose up -d backtester-web
```

### CLI –≤ Docker
```bash
# –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–º–æ—â—å
./docker-run.sh cli --help

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –±—ç–∫—Ç–µ—Å—Ç
./docker-run.sh cli --strategy conservative_long

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ —Å –±–∏—Ä–∂–∏
./docker-run.sh cli --download-data --exchange binance
```

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Docker
```bash
./docker-run.sh build    # –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞–∑—ã
./docker-run.sh stop     # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./docker-run.sh logs     # –ü–æ–∫–∞–∑–∞—Ç—å –ª–æ–≥–∏
./docker-run.sh clean    # –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
```

### –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º —Å Docker

–ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–∞—é—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–µ—Ç—å—é –ø—Ä–∏ —Å–±–æ—Ä–∫–µ Docker –æ–±—Ä–∞–∑–∞:

```bash
# –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –º–∏–Ω–∏–º–∞–ª—å–Ω—É—é –≤–µ—Ä—Å–∏—é –±–µ–∑ —Å–∏—Å—Ç–µ–º–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
./docker-run.sh build --minimal
./docker-run.sh web --minimal
```

–ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ —Ä–µ—à–µ–Ω–∏—é –ø—Ä–æ–±–ª–µ–º: [DOCKER_TROUBLESHOOTING.md](DOCKER_TROUBLESHOOTING.md)

### üåê –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –±–∏—Ä–∂

1. **–ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–∏—Ä–∂–∏:**
```bash
python main.py --list-exchanges
```

2. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ —Å –±–∏—Ä–∂–∏:**
```bash
python main.py --download-data --exchange binance --symbol-api BTC/USDT --timeframe-api 1h
```

3. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫—Ç–µ—Å—Ç —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ API:**
```bash
python main.py --strategy binance_btc_1h
```

## üåê –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —É–¥–æ–±–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±—ç–∫—Ç–µ—Å—Ç–∞–º–∏ —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä:

### –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- üìä **–ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏** - –∫—Ä–∏–≤–∞—è —ç–∫–≤–∏—Ç–∏, —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ PnL, –ø—Ä–æ—Å–∞–¥–∫–∞
- ‚öôÔ∏è **–í–∏–∑—É–∞–ª—å–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–π —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—ã
- üöÄ **–ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –±—ç–∫—Ç–µ—Å—Ç—ã** - –∑–∞–ø—É—Å–∫ –≤ —Ñ–æ–Ω–æ–≤–æ–º —Ä–µ–∂–∏–º–µ —Å –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞
- üìà **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏** - –∑–∞–≥—Ä—É–∑–∫–∞ —Å –±–∏—Ä–∂, –ø—Ä–æ—Å–º–æ—Ç—Ä –¥–æ—Å—Ç—É–ø–Ω—ã—Ö —Å–∏–º–≤–æ–ª–æ–≤
- üìã **–ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ –±—ç–∫—Ç–µ—Å—Ç–æ–≤
- üì± **–ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω** - —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö

### –î–æ—Å—Ç—É–ø:
```bash
# –ó–∞–ø—É—Å–∫ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
./docker-run.sh web

# –û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
http://localhost:8000
```

### –°—Ç—Ä–∞–Ω–∏—Ü—ã:
- **–ì–ª–∞–≤–Ω–∞—è** - –æ–±–∑–æ—Ä –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–µ–π –∏ –±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è** - –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
- **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã** - –ø—Ä–æ—Å–º–æ—Ç—Ä –∏ –∞–Ω–∞–ª–∏–∑ –±—ç–∫—Ç–µ—Å—Ç–æ–≤
- **API** - REST endpoints –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## ‚öôÔ∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–û—Å–Ω–æ–≤–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –≤ —Ñ–∞–π–ª–µ `config.json`. –ù–æ–≤–∞—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:

```json
{
  "start_balance": 1000,           // –ù–∞—á–∞–ª—å–Ω—ã–π –±–∞–ª–∞–Ω—Å
  "leverage": 1,                   // –ü–ª–µ—á–æ (1-10)
  "order_type": "long",            // –¢–∏–ø –æ—Ä–¥–µ—Ä–æ–≤: "long" –∏–ª–∏ "short"
  
  "entry_conditions": {
    "type": "manual",              // –¢–∏–ø –≤—Ö–æ–¥–∞ –≤ –ø–æ–∑–∏—Ü–∏—é
    "trigger": "price_drop",       // –¢—Ä–∏–≥–≥–µ—Ä: "price_drop" –∏–ª–∏ "price_rise"
    "percent": 2                   // –ü—Ä–æ—Ü–µ–Ω—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –¥–ª—è –≤—Ö–æ–¥–∞
  },
  
  "first_order": {
    "amount_percent": 10,          // –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –±–∞–ª–∞–Ω—Å–∞ –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –æ—Ä–¥–µ—Ä–∞
    "amount_fixed": null,          // –§–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—É–º–º–∞ (–∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–∞ –ø—Ä–æ—Ü–µ–Ω—Ç—É)
    "risk_percent": null           // –ü—Ä–æ—Ü–µ–Ω—Ç —Ä–∏—Å–∫–∞ –æ—Ç –±–∞–ª–∞–Ω—Å–∞
  },
  
  "dca": {
    "enabled": true,               // –í–∫–ª—é—á–∏—Ç—å DCA
    "max_orders": 5,               // –ú–∞–∫—Å–∏–º—É–º DCA –æ—Ä–¥–µ—Ä–æ–≤
    "martingale": {
      "enabled": true,             // –í–∫–ª—é—á–∏—Ç—å –º–∞—Ä—Ç–∏–Ω–≥–µ–π–ª
      "multiplier": 2.0,           // –ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä —Ä–∞–∑–º–µ—Ä–∞ –æ—Ä–¥–µ—Ä–∞
      "progression": "exponential" // –¢–∏–ø –ø—Ä–æ–≥—Ä–µ—Å—Å–∏–∏: exponential/linear/fibonacci
    },
    "step_price": {
      "type": "fixed_percent",     // –¢–∏–ø —à–∞–≥–∞: fixed_percent/dynamic_percent/atr_based
      "value": 1.5,                // –ë–∞–∑–æ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ —à–∞–≥–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
      "dynamic_multiplier": 1.0,   // –ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä –¥–ª—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–æ–≥–æ —à–∞–≥–∞
      "atr_multiplier": null       // –ú—É–ª—å—Ç–∏–ø–ª–∏–∫–∞—Ç–æ—Ä ATR (–¥–ª—è atr_based)
    }
  },
  
  "take_profit": {
    "enabled": true,               // –í–∫–ª—é—á–∏—Ç—å take profit
    "percent": 5,                  // –ü—Ä–æ—Ü–µ–Ω—Ç take profit
    "trailing": {
      "enabled": false,            // –í–∫–ª—é—á–∏—Ç—å trailing take profit
      "activation_percent": 3,     // –ü—Ä–æ—Ü–µ–Ω—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ trailing
      "trail_percent": 1           // –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—Å—Ç—É–ø–∞ trailing
    }
  },
  
  "stop_loss": {
    "enabled": true,               // –í–∫–ª—é—á–∏—Ç—å stop loss
    "percent": 10,                 // –ü—Ä–æ—Ü–µ–Ω—Ç stop loss
    "trailing": {
      "enabled": false,            // –í–∫–ª—é—á–∏—Ç—å trailing stop loss
      "activation_percent": 2,     // –ü—Ä–æ—Ü–µ–Ω—Ç –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ trailing
      "trail_percent": 0.5         // –ü—Ä–æ—Ü–µ–Ω—Ç –æ—Ç—Å—Ç—É–ø–∞ trailing
    }
  },
  
  "risk_management": {
    "max_drawdown_percent": 20,    // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö
    "max_open_positions": 1,       // –ú–∞–∫—Å–∏–º—É–º –æ—Ç–∫—Ä—ã—Ç—ã—Ö –ø–æ–∑–∏—Ü–∏–π
    "daily_loss_limit": null       // –î–Ω–µ–≤–Ω–æ–π –ª–∏–º–∏—Ç —É–±—ã—Ç–∫–æ–≤
  }
}
```

## üåê –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±–∏—Ä–∂–∏

–ß–µ—Ä–µ–∑ CCXT –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è **100+ –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂**, –≤–∫–ª—é—á–∞—è:

### –ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –±–∏—Ä–∂–∏:
- **Binance** - –∫—Ä—É–ø–Ω–µ–π—à–∞—è –∫—Ä–∏–ø—Ç–æ–±–∏—Ä–∂–∞
- **OKX** - –≤—ã—Å–æ–∫–∞—è –ª–∏–∫–≤–∏–¥–Ω–æ—Å—Ç—å
- **Bybit** - –¥–µ—Ä–∏–≤–∞—Ç–∏–≤—ã –∏ —Å–ø–æ—Ç
- **KuCoin** - —à–∏—Ä–æ–∫–∏–π –≤—ã–±–æ—Ä –∞–ª—å—Ç–∫–æ–∏–Ω–æ–≤
- **Coinbase Pro** - —Ä–µ–≥—É–ª–∏—Ä—É–µ–º–∞—è –±–∏—Ä–∂–∞ –°–®–ê
- **Kraken** - –µ–≤—Ä–æ–ø–µ–π—Å–∫–∞—è –±–∏—Ä–∂–∞
- **Huobi** - –∞–∑–∏–∞—Ç—Å–∫–∞—è –±–∏—Ä–∂–∞
- **Gate.io** - DeFi —Ç–æ–∫–µ–Ω—ã

### –î–æ—Å—Ç—É–ø–Ω—ã–µ —Ç–∞–π–º—Ñ—Ä–µ–π–º—ã:
- `1m`, `3m`, `5m`, `15m`, `30m` - –º–∏–Ω—É—Ç–Ω—ã–µ
- `1h`, `2h`, `4h`, `6h`, `8h`, `12h` - —á–∞—Å–æ–≤—ã–µ  
- `1d`, `3d`, `1w`, `1M` - –¥–Ω–µ–≤–Ω—ã–µ –∏ –≤—ã—à–µ

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API:
```bash
# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –±–∏—Ä–∂–∏
python main.py --list-exchanges

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π –±–∏—Ä–∂–µ
python main.py --exchange-info binance

# –ó–∞–≥—Ä—É–∑–∏—Ç—å –¥–∞–Ω–Ω—ã–µ BTC/USDT —Å Binance –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ 30 –¥–Ω–µ–π
python main.py --download-data --exchange binance --symbol-api BTC/USDT --timeframe-api 1h
```

## üìä –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö

CSV —Ñ–∞–π–ª –¥–æ–ª–∂–µ–Ω —Å–æ–¥–µ—Ä–∂–∞—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–ª–æ–Ω–∫–∏:
```csv
timestamp,open,high,low,close,volume
2023-01-01 00:00:00,30000.00,30100.00,29900.00,30050.00,125.45
2023-01-01 00:15:00,30050.00,30200.00,30000.00,30150.00,98.32
...
```

## üéÆ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ë–∞–∑–æ–≤—ã–π –∑–∞–ø—É—Å–∫
python main.py

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ –∫–æ–Ω—Ñ–∏–≥–∞
python main.py --config my_config.json

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≥–æ—Ç–æ–≤–æ–π —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏
python main.py --strategy aggressive_martingale

# –ü–æ–¥—Ä–æ–±–Ω—ã–π –≤—ã–≤–æ–¥
python main.py --verbose

# –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
python main.py --save-results

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª–Ω–æ–≥–æ –æ—Ç—á–µ—Ç–∞ —Å –≥—Ä–∞—Ñ–∏–∫–∞–º–∏
python main.py --generate-report

# –°–æ–∑–¥–∞–Ω–∏–µ –æ–±—Ä–∞–∑—Ü–∞ –¥–∞–Ω–Ω—ã—Ö
python main.py --create-sample-data

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞ –∏–∑ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
python main.py --report-only results.json

# –†–∞–±–æ—Ç–∞ —Å API –∏ –±–∏—Ä–∂–∞–º–∏
python main.py --list-exchanges                    # –°–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–∏—Ä–∂
python main.py --exchange-info binance             # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–∏—Ä–∂–µ
python main.py --download-data --exchange okx      # –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å OKX
```

### –ü—Ä–æ–≥—Ä–∞–º–º–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```python
from backtester import Backtester
from reporter import BacktestReporter

# –°–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–ø—É—Å–∫ –±—ç–∫—Ç–µ—Å—Ç–µ—Ä–∞
config = {
    "start_balance": 1000,
    "order_type": "long",
    "dca": {"enabled": True, "max_orders": 3},
    "take_profit": 5,
    "stop_loss": 10,
    "data_file": "data/BTCUSDT_15m.csv"
}

backtester = Backtester(config_dict=config)
results = backtester.run_backtest()

# –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ç—á–µ—Ç–∞
reporter = BacktestReporter(results)
print(reporter.generate_summary_report())
reporter.generate_full_report()
```

## üìà –°—Ç—Ä–∞—Ç–µ–≥–∏–∏

### Long Strategy
- –í—Ö–æ–¥ –ø—Ä–∏ –ø–∞–¥–µ–Ω–∏–∏ —Ü–µ–Ω—ã –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –Ω–µ–¥–∞–≤–Ω–µ–≥–æ –º–∞–∫—Å–∏–º—É–º–∞
- DCA –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º –ø–∞–¥–µ–Ω–∏–∏ —Ü–µ–Ω—ã
- –í—ã—Ö–æ–¥ –ø–æ Take Profit –∏–ª–∏ Stop Loss –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã

### Short Strategy  
- –í—Ö–æ–¥ –ø—Ä–∏ —Ä–æ—Å—Ç–µ —Ü–µ–Ω—ã –Ω–∞ –∑–∞–¥–∞–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ–Ω—Ç –æ—Ç –Ω–µ–¥–∞–≤–Ω–µ–≥–æ –º–∏–Ω–∏–º—É–º–∞
- DCA –ø—Ä–∏ –¥–∞–ª—å–Ω–µ–π—à–µ–º —Ä–æ—Å—Ç–µ —Ü–µ–Ω—ã
- –í—ã—Ö–æ–¥ –ø–æ Take Profit –∏–ª–∏ Stop Loss –æ—Ç —Å—Ä–µ–¥–Ω–µ–π —Ü–µ–Ω—ã

### DCA (Dollar Cost Averaging)
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É—Å—Ä–µ–¥–Ω–µ–Ω–∏–µ –ø–æ–∑–∏—Ü–∏–∏ –ø—Ä–∏ –Ω–µ–±–ª–∞–≥–æ–ø—Ä–∏—è—Ç–Ω–æ–º –¥–≤–∏–∂–µ–Ω–∏–∏
- –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–π —à–∞–≥ –∏ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ä–¥–µ—Ä–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –ú–∞—Ä—Ç–∏–Ω–≥–µ–π–ª (—É–≤–µ–ª–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ –æ—Ä–¥–µ—Ä–æ–≤)

## üìä –û—Ç—á–µ—Ç—ã –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞

–°–∏—Å—Ç–µ–º–∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ –æ—Ç—á–µ—Ç—ã:

### –¢–µ–∫—Å—Ç–æ–≤—ã–µ –æ—Ç—á–µ—Ç—ã
- –°–≤–æ–¥–Ω—ã–π –æ—Ç—á–µ—Ç —Å –æ—Å–Ω–æ–≤–Ω—ã–º–∏ –º–µ—Ç—Ä–∏–∫–∞–º–∏
- –î–µ—Ç–∞–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Å–¥–µ–ª–æ–∫
- –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –ø–æ –≤—Ä–µ–º–µ–Ω–∏

### –ì—Ä–∞—Ñ–∏–∫–∏ (–ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ matplotlib)
- –ö—Ä–∏–≤–∞—è —ç–∫–≤–∏—Ç–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞)
- –†–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–±—ã–ª–µ–π/—É–±—ã—Ç–∫–æ–≤
- –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ—Å–∞–¥–∫–∏
- –ú–µ—Å—è—á–Ω–∞—è –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å

### –ú–µ—Ç—Ä–∏–∫–∏
- **–û—Å–Ω–æ–≤–Ω—ã–µ**: –æ–±—â–∞—è –ø—Ä–∏–±—ã–ª—å, –¥–æ—Ö–æ–¥–Ω–æ—Å—Ç—å, –≤–∏–Ω—Ä–µ–π—Ç
- **–†–∏—Å–∫**: –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ—Å–∞–¥–∫–∞, Sharpe ratio, VaR
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ**: Profit Factor, Calmar Ratio, Recovery Factor

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —Å–ª–µ–¥—É—é—â–∏—Ö –º–æ–¥—É–ª–µ–π:

- **`data_loader.py`** - –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
- **`strategy.py`** - –ª–æ–≥–∏–∫–∞ —Ç–æ—Ä–≥–æ–≤—ã—Ö —Å—Ç—Ä–∞—Ç–µ–≥–∏–π (Long/Short, DCA, –ú–∞—Ä—Ç–∏–Ω–≥–µ–π–ª)
- **`backtester.py`** - –æ—Å–Ω–æ–≤–Ω–æ–π –¥–≤–∏–∂–æ–∫ –±—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- **`reporter.py`** - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç—á–µ—Ç–æ–≤ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
- **`main.py`** - CLI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- **`web_app.py`** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Flask
- **`config.json`** - —Ñ–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

## üê≥ Docker –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—é —Å –ø–æ–º–æ—â—å—é Docker:

### –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã:
- **`backtester`** - CLI –≤–µ—Ä—Å–∏—è –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –±—ç–∫—Ç–µ—Å—Ç–æ–≤
- **`backtester-web`** - –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ Flask + Gunicorn
- **`redis`** - –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

### –§–∞–π–ª—ã Docker:
- **`Dockerfile`** - –æ–±—Ä–∞–∑ –¥–ª—è CLI –≤–µ—Ä—Å–∏–∏
- **`Dockerfile.web`** - –æ–±—Ä–∞–∑ –¥–ª—è –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
- **`docker-compose.yml`** - –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–∏—Å–æ–≤
- **`docker-run.sh`** - —É–¥–æ–±–Ω—ã–π —Å–∫—Ä–∏–ø—Ç —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Docker:
- ‚úÖ **–ò–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ä–µ–¥–∞** - –Ω–µ—Ç –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- ‚úÖ **–ü—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ** - –æ–¥–∏–Ω —Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–ø—É—Å–∫–∞
- ‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–∏—Ç—å –≤–æ—Ä–∫–µ—Ä—ã
- ‚úÖ **–ü–æ—Ä—Ç–∞—Ç–∏–≤–Ω–æ—Å—Ç—å** - —Ä–∞–±–æ—Ç–∞–µ—Ç –≤–µ–∑–¥–µ –≥–¥–µ –µ—Å—Ç—å Docker

## üîß –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
```python
# –í strategy.py –¥–æ–±–∞–≤—å—Ç–µ –º–µ—Ç–æ–¥—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä–æ–≤
def calculate_rsi(self, data: pd.DataFrame, period: int = 14) -> pd.Series:
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è RSI
    pass

def should_enter_position(self, current_data, historical_data):
    # –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã –≤ –ª–æ–≥–∏–∫–µ –≤—Ö–æ–¥–∞
    rsi = self.calculate_rsi(historical_data)
    if rsi.iloc[-1] < 30:  # –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å
        return True
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ API –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
```python
# –í data_loader.py —Ä–∞—Å—à–∏—Ä—å—Ç–µ –º–µ—Ç–æ–¥ load_from_api
def load_from_api(self, symbol, timeframe, start_date=None, end_date=None):
    # –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å –±–∏—Ä–∂–∏
    pass
```

## üìù –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π

### –ö–æ–Ω—Å–µ—Ä–≤–∞—Ç–∏–≤–Ω–∞—è Long —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
```json
{
  "start_balance": 1000,
  "order_type": "long",
  "entry_conditions": {"trigger": "price_drop", "percent": 3},
  "dca": {"enabled": true, "max_orders": 3, "multiplier": 1, "step_percent": 2},
  "take_profit": 3,
  "stop_loss": 15
}
```

### –ê–≥—Ä–µ—Å—Å–∏–≤–Ω–∞—è –ú–∞—Ä—Ç–∏–Ω–≥–µ–π–ª —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
```json
{
  "start_balance": 1000,
  "order_type": "long",
  "entry_conditions": {"trigger": "price_drop", "percent": 1},
  "dca": {"enabled": true, "max_orders": 5, "multiplier": 2.5, "step_percent": 1},
  "take_profit": 2,
  "stop_loss": 20
}
```

### Short —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
```json
{
  "start_balance": 1000,
  "order_type": "short",
  "entry_conditions": {"trigger": "price_rise", "percent": 2},
  "dca": {"enabled": true, "max_orders": 4, "multiplier": 1.5, "step_percent": 1.5},
  "take_profit": 4,
  "stop_loss": 12
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

1. **–≠—Ç–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –¥–ª—è –±—ç–∫—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è**, –Ω–µ –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–∏
2. **–ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –Ω–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É—é—Ç –±—É–¥—É—â—É—é –ø—Ä–∏–±—ã–ª—å**
3. **–£—á–∏—Ç—ã–≤–∞–π—Ç–µ –∫–æ–º–∏—Å—Å–∏–∏ –∏ –ø—Ä–æ—Å–∫–∞–ª—å–∑—ã–≤–∞–Ω–∏—è** –ø—Ä–∏ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ
4. **–¢–µ—Å—Ç–∏—Ä—É–π—Ç–µ —Å—Ç—Ä–∞—Ç–µ–≥–∏–∏ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–µ—Ä–∏–æ–¥–∞—Ö** –∏ —Ä—ã–Ω–∫–∞—Ö
5. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ä–∏—Å–∫-–º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç** –≤ —Ä–µ–∞–ª—å–Ω–æ–π —Ç–æ—Ä–≥–æ–≤–ª–µ

## ü§ù –í–∫–ª–∞–¥ –≤ –ø—Ä–æ–µ–∫—Ç

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é—Ç—Å—è —É–ª—É—á—à–µ–Ω–∏—è –∏ –Ω–æ–≤—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –ù–æ–≤—ã–µ —Ç–∏–ø—ã —Å—Ç—Ä–∞—Ç–µ–≥–∏–π
- –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä—ã
- –£–ª—É—á—à–µ–Ω–∏—è –≤ –æ—Ç—á–µ—Ç–Ω–æ—Å—Ç–∏
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

MIT License - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏ –≤ —Ñ–∞–π–ª–µ LICENSE

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
2. –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `--verbose` –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
4. –°–æ–∑–¥–∞–π—Ç–µ issue —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º—ã